<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vapor Applications</title>
  <link rel="stylesheet" href="games.css">
  <link rel="stylesheet" href="nav.css">
</head>
<body>
  
  <nav class="navbar">
    <div class="nav-brand">Astatine</div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="games.html" class="active">Games</a></li>
      <li><a href="chat.html">Chat</a></li>
      <li><a href="settings.html">Settings</a></li>
    </ul>
  </nav>

  <div id="gameSearchBar">
    <input type="text" id="gameSearch" placeholder="Search games..." autocomplete="off">
  </div>

  <div id="gamesContainer" class="games-container">
  </div>

  <script>
    const gamesContainer = document.getElementById("gamesContainer");
    const searchInput = document.getElementById("gameSearch");
    let gamesData = [];

    fetch("games.json")
      .then(response => response.json())
      .then(data => {
        gamesData = data;
        renderGames(gamesData);
      })
      .catch(err => {
        gamesContainer.innerHTML = "<p>Error loading games.</p>";
        console.error(err);
      });

    function renderGames(games) {
      gamesContainer.innerHTML = "";
      games.forEach(game => {
        const card = document.createElement("div");
        card.classList.add("game-card");
        card.dataset.name = game.name;
        card.innerHTML = `
          <a href="#" class="game-link">
            <img src="${game.icon}" alt="${game.name} Icon">
            <span>${game.name}</span>
          </a>
        `;
        gamesContainer.appendChild(card);

        // Add click event to open the game in a fullscreen iframe
        const link = card.querySelector(".game-link");
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const gameTab = window.open("about:blank", "_blank");
          gameTab.document.write(`
            <html>
              <head>
                <title>${game.name}</title>
                <style>
                  html, body {
                    margin: 0;
                    height: 100%;
                    overflow: hidden;
                    background: #000;
                  }
                  iframe {
                    border: none;
                    width: 100vw;
                    height: 100vh;
                  }
                </style>
              </head>
              <body>
                <iframe src="${game.link}" allowfullscreen></iframe>
              </body>
            </html>
          `);
          gameTab.document.close();
        });
      });
    }

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      const filtered = gamesData.filter(game => game.name.toLowerCase().includes(query));
      renderGames(filtered);
    });
  </script>


<script>
const savedTheme = localStorage.getItem("vapor-theme") || "dark";

function applyChatTheme(mode) {
  if (mode === "light") {
    document.body.style.background = "#f0f0f0";
    document.body.style.color = "#111";

    document.querySelectorAll(".navbar, .settings-box, #urlInput, #searchButton, #switcher, #iframeWindow").forEach(el => {
      el.style.background = "#fff";
      el.style.color = "#111";
      el.style.border = "1px solid #ccc";
    });

    document.getElementById("onlineCount").style.background = "#fff";
    document.getElementById("onlineCount").style.color = "#111";
    document.getElementById("onlineCount").style.borderBottom = "1px solid #ccc";

    document.getElementById("inputBar").style.background = "#fff";
    document.getElementById("inputBar").style.borderTop = "1px solid #ccc";

    const msgInput = document.getElementById("msg");
    msgInput.style.background = "#fff";
    msgInput.style.color = "#111";
    msgInput.style.border = "1px solid #ccc";
    msgInput.style.outline = "none";

    document.querySelectorAll("select").forEach(sel => {
      sel.style.background = "#fff";
      sel.style.color = "#111";
      sel.style.border = "1px solid #ccc";
    });

  } else {
    document.body.style.background = "#000";
    document.body.style.color = "#cfcfcf";

    document.querySelectorAll(".navbar, .settings-box, #urlInput, #searchButton, #switcher, #iframeWindow").forEach(el => {
      el.style.background = "#111";
      el.style.color = "#cfcfcf";
      el.style.border = "1px solid #222";
    });

    document.getElementById("onlineCount").style.background = "#111";
    document.getElementById("onlineCount").style.color = "#cfcfcf";
    document.getElementById("onlineCount").style.borderBottom = "1px solid #222";

    document.getElementById("inputBar").style.background = "#000";
    document.getElementById("inputBar").style.borderTop = "1px solid #222";

    const msgInput = document.getElementById("msg");
    msgInput.style.background = "#000";
    msgInput.style.color = "#e0e0e0";
    msgInput.style.border = "none";

    document.querySelectorAll("select").forEach(sel => {
      sel.style.background = "#111";
      sel.style.color = "#cfcfcf";
      sel.style.border = "1px solid #222";
    });
  }
}

applyChatTheme(savedTheme);
</script>

</body>
</html>
